{"version":3,"sources":["components/chat.js","assets/plane.svg","assets/black-circle.svg","assets/house.svg","components/mapview.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","connect","path","Chat","useState","message","name","state","setState","chat","setChat","useEffect","on","date","Moment","format","onTextChange","e","target","value","className","onSubmit","preventDefault","emit","TextField","onChange","label","id","variant","map","index","IconLocation","L","icon","iconUrl","dot","iconRetinaUrl","iconAnchor","shadowUrl","shadowSize","shadowAnchor","iconSize","house","plane","MapView","setPlane","flights","setFlight","positions","setPositons","data","prev","code","position","show_passengers","passengers","pas","age","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","pos","pos_map","Marker","Popup","Object","keys","item","obj","airline","origin","destination","seats","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.99e6017e.chunk.js","sourcesContent":["import TextField from '@material-ui/core/TextField';\r\nimport '../styles/App.css';\r\nimport io from 'socket.io-client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Moment from 'moment';\r\n\r\n// ACHICAR LA FECHA QUE SALE GIGANTE\r\nconst socket = io.connect(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", { \r\n  path: '/flights'\r\n});\r\n\r\nfunction Chat(){\r\n  const [ state, setState ] = useState({ message: \"\", name: \"\" })\r\n  const [ chat, setChat ] = useState([])\r\n\r\n  useEffect(() => {\r\n    socket.on('CHAT', ({name, message }) => {\r\n      const date = Moment().format('MMMM Do YYYY, h:mm:ss a');\r\n      setChat([...chat, { name, message, date }])\r\n    })\r\n  })\r\n\r\n  const onTextChange = (e) => {\r\n    setState({ ...state, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  const onMessageSubmit = (e) => {\r\n    e.preventDefault()\r\n    const { name, message } = state\r\n    const date = Moment().format('MMMM Do YYYY, h:mm:ss a')\r\n    socket.emit(\"CHAT\", { name, message, date })\r\n    setState({ message: \"\", name: \"\"})\r\n  }\r\n\r\n  const renderChat = () => {\r\n    return chat.map(({ name, message, date }, index) => (\r\n      <div key={index}>\r\n        <h3>\r\n          <p>{date}</p>\r\n          {name}: <span>{message}</span>\r\n        </h3>\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <form onSubmit={onMessageSubmit}>\r\n        <h1>Messenger</h1>\r\n        <div className=\"name-field\">\r\n          <TextField name=\"name\" onChange={(e) => onTextChange(e)} value={state.name} label=\"Name\" />\r\n        </div>\r\n        <div>\r\n          <TextField\r\n            name=\"message\"\r\n            onChange={(e) => onTextChange(e)}\r\n            value={state.message}\r\n            id=\"outlined-multiline-static\"\r\n            variant=\"outlined\"\r\n            label=\"Message\"\r\n          />\r\n        </div>\r\n        <button>Send Message</button>\r\n      </form>\r\n      <div className=\"render-chat\">\r\n        <h1>Centro de Control</h1>\r\n        {renderChat()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chat;","export default __webpack_public_path__ + \"static/media/plane.dd7e4926.svg\";","export default __webpack_public_path__ + \"static/media/black-circle.a49a7c47.svg\";","export default __webpack_public_path__ + \"static/media/house.b5626aba.svg\";","import { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet'\r\nimport React, { useEffect, useState } from 'react';\r\nimport '../styles/leaflet.css';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport io from 'socket.io-client';\r\nimport L from 'leaflet';\r\nimport plane from '../assets/plane.svg';\r\nimport dot from '../assets/black-circle.svg';\r\nimport house from '../assets/house.svg';\r\n\r\nconst socket = io.connect(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", { \r\n  path: '/flights'\r\n});\r\n\r\nconst IconDot = new L.icon({\r\n  iconUrl: dot,\r\n  iconRetinaUrl: dot, \r\n  iconAnchor: [-0, -0],\r\n  shadowUrl: null,\r\n  shadowSize: null,\r\n  shadowAnchor: null,\r\n  iconSize: [5, 5],\r\n});\r\n\r\nconst IconHouse = new L.icon({\r\n  iconUrl: house,\r\n  iconRetinaUrl: house, \r\n  iconAnchor: [-0, -0],\r\n  shadowUrl: null,\r\n  shadowSize: null,\r\n  shadowAnchor: null,\r\n  iconSize: [25, 25],\r\n});\r\n\r\nconst IconLocation = new L.icon({\r\n  iconUrl: plane,\r\n  iconRetinaUrl: plane, \r\n  iconAnchor: [-0, -0],\r\n  shadowUrl: null,\r\n  shadowSize: null,\r\n  shadowAnchor: null,\r\n  iconSize: [30, 30],\r\n});\r\n\r\nconst blueOptions = { color: 'blue' };\r\n\r\nconst MapView = () => {\r\n  const [ plane, setPlane ]  = useState({});\r\n  const [ flights, setFlight ] = useState([]);\r\n  const [ positions, setPositons ] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    socket.on('POSITION', data => {\r\n      setPositons((prev) => ([...prev, data]));\r\n      setPlane((prev) => ({...prev, [data.code]: data.position }));\r\n    })\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.emit('FLIGHTS')\r\n    socket.on('FLIGHTS', data => {\r\n      setFlight(data)\r\n    })\r\n  }, []);\r\n  \r\n  const renderInfoFlights = () => {\r\n    return flights.map((obj) => (\r\n      <div>\r\n          <h3>Vuelo: {obj.code}</h3>\r\n          <p>Aerolinea: {obj.airline} </p>\r\n          <p>Origen: {obj.origin[0]}, {obj.origin[1]}</p>\r\n          <p>Destino: {obj.destination[0]}, {obj.destination[1]}</p>\r\n          <p>Avion: {obj.plane} </p>\r\n          <p>Asientos: {obj.seats} </p>\r\n          <p> Passengers</p>\r\n          {show_passengers(obj.passengers)}\r\n      </div>\r\n    ))\r\n  }\r\n  \r\n  const show_passengers = (passengers) => {\r\n    return passengers.map((pas) => {\r\n      return(\r\n        <p>{pas.name}, {pas.age} </p>\r\n      )\r\n    })\r\n  }\r\n  \r\n  const renderPositions = () => {\r\n    return(\r\n      positions.map((pos) => {\r\n        const pos_map = [pos.position[0], pos.position[1]];\r\n        return(\r\n          <Marker position={pos_map} icon={IconLocation}>\r\n            <Popup code={pos.code}>\r\n              <code>{pos.code}</code>\r\n            </Popup>\r\n          </Marker>\r\n        )}\r\n      )\r\n    )\r\n  }\r\n\r\n  const renderPlane = () => {\r\n    return Object.keys(plane).map((item) => {\r\n      //const pos_map = [plane[item].position[0], plane[item].position[1]]\r\n      return (\r\n        <div> \r\n        <p> Este es el item {plane[item].code}</p>\r\n        </div>\r\n      //   <Marker position={pos_map} icon={IconLocation}>\r\n      //   <Popup code={plane[item].code}>\r\n      //     <code>{plane[item].code}</code>\r\n      //   </Popup>\r\n      // </Marker>\r\n      )\r\n    })  \r\n  }\r\n\r\n  const renderHouse = () => {\r\n    {flights.map((flight) => {\r\n      const pos_origin = [flight.origin[0], flight.origin[1]]\r\n      const pos_des = [flight.destination[0], flights.destination[1]]\r\n      const multiPolyline = [pos_origin, pos_des]\r\n      return (\r\n        <div>\r\n        <Marker>position={pos_origin} icon={IconHouse}</Marker>\r\n        <Marker>position={pos_des} icon={IconHouse}</Marker>\r\n        <Polyline pathOptions={blueOptions} positions={multiPolyline} />\r\n        </div>\r\n        )\r\n    })}\r\n  }\r\n\r\n  return (\r\n    <div> \r\n      <div id='leaflet-container'> \r\n        <h1>MAP</h1>\r\n        <MapContainer center={[0, 0]} zoom={3} scrollWheelZoom={false}>\r\n          <TileLayer\r\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            {renderPositions()}\r\n            {renderPlane()}\r\n        </MapContainer>\r\n      </div>\r\n      <div> \r\n        <h1>Informaci√≥n de Vuelos</h1>\r\n        <button>Get flights </button>\r\n        {renderInfoFlights()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MapView","import './styles/App.css';\nimport React , {useEffect} from 'react';\nimport Chat from './components/chat';\nimport MapView from './components/mapview';\nimport io from 'socket.io-client';\n\nconst socket = io.connect(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", { \n  path: '/flights'\n});\n\nfunction App() {\n\n  useEffect(() => {\n    socket.emit('FLIGHTS')\n    });\n\n  return (\n    <div>\n      <MapView />\n      <Chat />\n    </div>\n  )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}